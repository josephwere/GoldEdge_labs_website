{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const defaultMode=localStorage.getItem('neuroedge_mode')||'professional';export default function AIChatWidget(){const[mode,setMode]=useState(defaultMode);const[messages,setMessages]=useState(()=>{try{return JSON.parse(localStorage.getItem('neuroedge_history')||'[]');}catch(e){return[];}});const[input,setInput]=useState('');const[typing,setTyping]=useState(false);const[sessionId,setSessionId]=useState(()=>localStorage.getItem('neuroedge_session')||'');const containerRef=useRef(null);useEffect(()=>{localStorage.setItem('neuroedge_history',JSON.stringify(messages.slice(-20)));},[messages]);useEffect(()=>{localStorage.setItem('neuroedge_mode',mode);},[mode]);useEffect(()=>{if(!sessionId){const sid='sess-'+Math.random().toString(36).substr(2,9);setSessionId(sid);localStorage.setItem('neuroedge_session',sid);}},[sessionId]);useEffect(()=>{// scroll to bottom when messages change\nif(containerRef.current){containerRef.current.scrollTop=containerRef.current.scrollHeight;}},[messages,typing]);const sendMessage=async()=>{if(!input.trim())return;const userMsg={role:'user',text:input,ts:Date.now()};setMessages(prev=>[...prev,userMsg]);setInput('');setTyping(true);try{const resp=await fetch(\"\".concat(process.env.REACT_APP_API_URL||'',\"/api/ai/chat\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:input,mode,sessionId})});if(!resp.ok){const err=await resp.json().catch(()=>({message:'error'}));setMessages(prev=>[...prev,{role:'ai',text:err.message||'NeuroEdge is calibrating. Try again shortly.'}]);}else{const data=await resp.json();setMessages(prev=>[...prev,{role:'ai',text:data.reply||data.message||'No reply'}]);// unlock \"Explorer\" badge locally by calling rewards unlock\ntry{const userId=localStorage.getItem('goldedge_user_id');if(userId){fetch(\"\".concat(process.env.REACT_APP_API_URL||'',\"/api/rewards/unlock\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,key:'explorer_ai',title:'Explorer',type:'badge',meta:{reason:'First AI interaction'}})}).catch(()=>{});}}catch(e){}}}catch(err){setMessages(prev=>[...prev,{role:'ai',text:'Network error. Check your connection.'}]);}finally{setTyping(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white/5 backdrop-blur-md p-4 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"NeuroEdge Chat\"}),/*#__PURE__*/_jsxs(\"select\",{value:mode,onChange:e=>setMode(e.target.value),className:\"bg-transparent text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"professional\",children:\"Professional\"}),/*#__PURE__*/_jsx(\"option\",{value:\"creative\",children:\"Creative\"}),/*#__PURE__*/_jsx(\"option\",{value:\"techie\",children:\"Techie\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,className:\"h-64 overflow-y-auto p-2 space-y-2 rounded-md bg-black/30\",children:[messages.map((m,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-md \".concat(m.role==='user'?'self-end bg-white/10':'bg-white/5'),children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm whitespace-pre-wrap\",children:m.text})},idx)),typing&&/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:/*#__PURE__*/_jsx(TypingIndicator,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(e.key==='Enter'){sendMessage();}},className:\"flex-1 p-2 rounded-md bg-black/20\",placeholder:\"Ask NeuroEdge something...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"px-4 py-2 rounded-md bg-gradient-to-r from-yellow-400 to-yellow-500 text-black font-semibold\",children:\"Send\"})]})]});}function TypingIndicator(){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Dot,{}),/*#__PURE__*/_jsx(Dot,{delay:150}),/*#__PURE__*/_jsx(Dot,{delay:300})]});}function Dot(_ref){let{delay=0}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-2 h-2 rounded-full bg-gray-300 animate-pulse\",style:{animationDelay:\"\".concat(delay,\"ms\")}});}","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","defaultMode","localStorage","getItem","AIChatWidget","mode","setMode","messages","setMessages","JSON","parse","e","input","setInput","typing","setTyping","sessionId","setSessionId","containerRef","setItem","stringify","slice","sid","Math","random","toString","substr","current","scrollTop","scrollHeight","sendMessage","trim","userMsg","role","text","ts","Date","now","prev","resp","fetch","concat","process","env","REACT_APP_API_URL","method","headers","body","message","ok","err","json","catch","data","reply","userId","key","title","type","meta","reason","className","children","value","onChange","target","ref","map","m","idx","TypingIndicator","onKeyDown","placeholder","onClick","Dot","delay","_ref","style","animationDelay"],"sources":["C:/Users/Admin/Downloads/GoldEdge_labs_website-main/GoldEdge_labs_website-main/GoldEdge_Labs_Website/1_Frontend/src/components/AIChatWidget.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst defaultMode = localStorage.getItem('neuroedge_mode') || 'professional';\n\nexport default function AIChatWidget() {\n  const [mode, setMode] = useState(defaultMode);\n  const [messages, setMessages] = useState(() => {\n    try { return JSON.parse(localStorage.getItem('neuroedge_history') || '[]'); } catch(e){ return []; }\n  });\n  const [input, setInput] = useState('');\n  const [typing, setTyping] = useState(false);\n  const [sessionId, setSessionId] = useState(() => localStorage.getItem('neuroedge_session') || '');\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    localStorage.setItem('neuroedge_history', JSON.stringify(messages.slice(-20)));\n  }, [messages]);\n\n  useEffect(() => {\n    localStorage.setItem('neuroedge_mode', mode);\n  }, [mode]);\n\n  useEffect(() => {\n    if (!sessionId) {\n      const sid = 'sess-' + Math.random().toString(36).substr(2,9);\n      setSessionId(sid);\n      localStorage.setItem('neuroedge_session', sid);\n    }\n  }, [sessionId]);\n\n  useEffect(() => {\n    // scroll to bottom when messages change\n    if (containerRef.current) {\n      containerRef.current.scrollTop = containerRef.current.scrollHeight;\n    }\n  }, [messages, typing]);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n    const userMsg = { role: 'user', text: input, ts: Date.now() };\n    setMessages(prev => [...prev, userMsg]);\n    setInput('');\n    setTyping(true);\n    try {\n      const resp = await fetch(`${process.env.REACT_APP_API_URL || ''}/api/ai/chat`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: input, mode, sessionId })\n      });\n      if (!resp.ok) {\n        const err = await resp.json().catch(()=>({message:'error'}));\n        setMessages(prev => [...prev, { role: 'ai', text: err.message || 'NeuroEdge is calibrating. Try again shortly.' }]);\n      } else {\n        const data = await resp.json();\n        setMessages(prev => [...prev, { role: 'ai', text: data.reply || data.message || 'No reply' }]);\n        // unlock \"Explorer\" badge locally by calling rewards unlock\n        try {\n          const userId = localStorage.getItem('goldedge_user_id');\n          if (userId) {\n            fetch(`${process.env.REACT_APP_API_URL || ''}/api/rewards/unlock`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ userId, key: 'explorer_ai', title: 'Explorer', type: 'badge', meta: { reason: 'First AI interaction' } })\n            }).catch(()=>{});\n          }\n        } catch(e){}\n      }\n    } catch (err) {\n      setMessages(prev => [...prev, { role: 'ai', text: 'Network error. Check your connection.' }]);\n    } finally {\n      setTyping(false);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-md bg-white/5 backdrop-blur-md p-4 rounded-xl shadow-lg\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <h3 className=\"font-semibold\">NeuroEdge Chat</h3>\n        <select value={mode} onChange={(e)=>setMode(e.target.value)} className=\"bg-transparent text-sm\">\n          <option value=\"professional\">Professional</option>\n          <option value=\"creative\">Creative</option>\n          <option value=\"techie\">Techie</option>\n        </select>\n      </div>\n      <div ref={containerRef} className=\"h-64 overflow-y-auto p-2 space-y-2 rounded-md bg-black/30\">\n        {messages.map((m, idx) => (\n          <div key={idx} className={`p-2 rounded-md ${m.role==='user'?'self-end bg-white/10':'bg-white/5'}`}>\n            <div className=\"text-sm whitespace-pre-wrap\">{m.text}</div>\n          </div>\n        ))}\n        {typing && <div className=\"p-2\"><TypingIndicator /></div>}\n      </div>\n      <div className=\"mt-3 flex gap-2\">\n        <input value={input} onChange={(e)=>setInput(e.target.value)} onKeyDown={(e)=>{ if(e.key==='Enter'){ sendMessage(); } }} className=\"flex-1 p-2 rounded-md bg-black/20\" placeholder=\"Ask NeuroEdge something...\" />\n        <button onClick={sendMessage} className=\"px-4 py-2 rounded-md bg-gradient-to-r from-yellow-400 to-yellow-500 text-black font-semibold\">Send</button>\n      </div>\n    </div>\n  );\n}\n\nfunction TypingIndicator(){ \n  return (<div className=\"flex items-center space-x-1\"><Dot/><Dot delay={150}/><Dot delay={300}/></div>);\n}\nfunction Dot({delay=0}){\n  return (<span className=\"inline-block w-2 h-2 rounded-full bg-gray-300 animate-pulse\" style={{animationDelay: `${delay}ms`}}></span>);\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,KAAM,CAAAC,WAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,EAAI,cAAc,CAE5E,cAAe,SAAS,CAAAC,YAAYA,CAAA,CAAG,CACrC,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAACO,WAAW,CAAC,CAC7C,KAAM,CAACM,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,IAAM,CAC7C,GAAI,CAAE,MAAO,CAAAe,IAAI,CAACC,KAAK,CAACR,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,EAAI,IAAI,CAAC,CAAE,CAAE,MAAMQ,CAAC,CAAC,CAAE,MAAO,EAAE,CAAE,CACrG,CAAC,CAAC,CACF,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACoB,MAAM,CAAEC,SAAS,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACsB,SAAS,CAAEC,YAAY,CAAC,CAAGvB,QAAQ,CAAC,IAAMQ,YAAY,CAACC,OAAO,CAAC,mBAAmB,CAAC,EAAI,EAAE,CAAC,CACjG,KAAM,CAAAe,YAAY,CAAGtB,MAAM,CAAC,IAAI,CAAC,CAEjCD,SAAS,CAAC,IAAM,CACdO,YAAY,CAACiB,OAAO,CAAC,mBAAmB,CAAEV,IAAI,CAACW,SAAS,CAACb,QAAQ,CAACc,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAChF,CAAC,CAAE,CAACd,QAAQ,CAAC,CAAC,CAEdZ,SAAS,CAAC,IAAM,CACdO,YAAY,CAACiB,OAAO,CAAC,gBAAgB,CAAEd,IAAI,CAAC,CAC9C,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEVV,SAAS,CAAC,IAAM,CACd,GAAI,CAACqB,SAAS,CAAE,CACd,KAAM,CAAAM,GAAG,CAAG,OAAO,CAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAC5DT,YAAY,CAACK,GAAG,CAAC,CACjBpB,YAAY,CAACiB,OAAO,CAAC,mBAAmB,CAAEG,GAAG,CAAC,CAChD,CACF,CAAC,CAAE,CAACN,SAAS,CAAC,CAAC,CAEfrB,SAAS,CAAC,IAAM,CACd;AACA,GAAIuB,YAAY,CAACS,OAAO,CAAE,CACxBT,YAAY,CAACS,OAAO,CAACC,SAAS,CAAGV,YAAY,CAACS,OAAO,CAACE,YAAY,CACpE,CACF,CAAC,CAAE,CAACtB,QAAQ,CAAEO,MAAM,CAAC,CAAC,CAEtB,KAAM,CAAAgB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAAClB,KAAK,CAACmB,IAAI,CAAC,CAAC,CAAE,OACnB,KAAM,CAAAC,OAAO,CAAG,CAAEC,IAAI,CAAE,MAAM,CAAEC,IAAI,CAAEtB,KAAK,CAAEuB,EAAE,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAE,CAAC,CAC7D7B,WAAW,CAAC8B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAEN,OAAO,CAAC,CAAC,CACvCnB,QAAQ,CAAC,EAAE,CAAC,CACZE,SAAS,CAAC,IAAI,CAAC,CACf,GAAI,CACF,KAAM,CAAAwB,IAAI,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,EAAE,iBAAgB,CAC7EC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEtC,IAAI,CAACW,SAAS,CAAC,CAAE4B,OAAO,CAAEpC,KAAK,CAAEP,IAAI,CAAEW,SAAU,CAAC,CAC1D,CAAC,CAAC,CACF,GAAI,CAACuB,IAAI,CAACU,EAAE,CAAE,CACZ,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAX,IAAI,CAACY,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAK,CAACJ,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAC5DxC,WAAW,CAAC8B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEL,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAEgB,GAAG,CAACF,OAAO,EAAI,8CAA+C,CAAC,CAAC,CAAC,CACrH,CAAC,IAAM,CACL,KAAM,CAAAK,IAAI,CAAG,KAAM,CAAAd,IAAI,CAACY,IAAI,CAAC,CAAC,CAC9B3C,WAAW,CAAC8B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEL,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAEmB,IAAI,CAACC,KAAK,EAAID,IAAI,CAACL,OAAO,EAAI,UAAW,CAAC,CAAC,CAAC,CAC9F;AACA,GAAI,CACF,KAAM,CAAAO,MAAM,CAAGrD,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CACvD,GAAIoD,MAAM,CAAE,CACVf,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,EAAE,wBAAuB,CACjEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEtC,IAAI,CAACW,SAAS,CAAC,CAAEmC,MAAM,CAAEC,GAAG,CAAE,aAAa,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,CAAEC,MAAM,CAAE,sBAAuB,CAAE,CAAC,CACjI,CAAC,CAAC,CAACR,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAClB,CACF,CAAE,MAAMzC,CAAC,CAAC,CAAC,CACb,CACF,CAAE,MAAOuC,GAAG,CAAE,CACZ1C,WAAW,CAAC8B,IAAI,EAAI,CAAC,GAAGA,IAAI,CAAE,CAAEL,IAAI,CAAE,IAAI,CAAEC,IAAI,CAAE,uCAAwC,CAAC,CAAC,CAAC,CAC/F,CAAC,OAAS,CACRnB,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,mBACEf,KAAA,QAAK6D,SAAS,CAAC,sEAAsE,CAAAC,QAAA,eACnF9D,KAAA,QAAK6D,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDhE,IAAA,OAAI+D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cACjD9D,KAAA,WAAQ+D,KAAK,CAAE1D,IAAK,CAAC2D,QAAQ,CAAGrD,CAAC,EAAGL,OAAO,CAACK,CAAC,CAACsD,MAAM,CAACF,KAAK,CAAE,CAACF,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eAC7FhE,IAAA,WAAQiE,KAAK,CAAC,cAAc,CAAAD,QAAA,CAAC,cAAY,CAAQ,CAAC,cAClDhE,IAAA,WAAQiE,KAAK,CAAC,UAAU,CAAAD,QAAA,CAAC,UAAQ,CAAQ,CAAC,cAC1ChE,IAAA,WAAQiE,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChC,CAAC,EACN,CAAC,cACN9D,KAAA,QAAKkE,GAAG,CAAEhD,YAAa,CAAC2C,SAAS,CAAC,2DAA2D,CAAAC,QAAA,EAC1FvD,QAAQ,CAAC4D,GAAG,CAAC,CAACC,CAAC,CAAEC,GAAG,gBACnBvE,IAAA,QAAe+D,SAAS,mBAAApB,MAAA,CAAoB2B,CAAC,CAACnC,IAAI,GAAG,MAAM,CAAC,sBAAsB,CAAC,YAAY,CAAG,CAAA6B,QAAA,cAChGhE,IAAA,QAAK+D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAEM,CAAC,CAAClC,IAAI,CAAM,CAAC,EADnDmC,GAEL,CACN,CAAC,CACDvD,MAAM,eAAIhB,IAAA,QAAK+D,SAAS,CAAC,KAAK,CAAAC,QAAA,cAAChE,IAAA,CAACwE,eAAe,GAAE,CAAC,CAAK,CAAC,EACtD,CAAC,cACNtE,KAAA,QAAK6D,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BhE,IAAA,UAAOiE,KAAK,CAAEnD,KAAM,CAACoD,QAAQ,CAAGrD,CAAC,EAAGE,QAAQ,CAACF,CAAC,CAACsD,MAAM,CAACF,KAAK,CAAE,CAACQ,SAAS,CAAG5D,CAAC,EAAG,CAAE,GAAGA,CAAC,CAAC6C,GAAG,GAAG,OAAO,CAAC,CAAE1B,WAAW,CAAC,CAAC,CAAE,CAAE,CAAE,CAAC+B,SAAS,CAAC,mCAAmC,CAACW,WAAW,CAAC,4BAA4B,CAAE,CAAC,cAClN1E,IAAA,WAAQ2E,OAAO,CAAE3C,WAAY,CAAC+B,SAAS,CAAC,8FAA8F,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,EACjJ,CAAC,EACH,CAAC,CAEV,CAEA,QAAS,CAAAQ,eAAeA,CAAA,CAAE,CACxB,mBAAQtE,KAAA,QAAK6D,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAAChE,IAAA,CAAC4E,GAAG,GAAC,CAAC,cAAA5E,IAAA,CAAC4E,GAAG,EAACC,KAAK,CAAE,GAAI,CAAC,CAAC,cAAA7E,IAAA,CAAC4E,GAAG,EAACC,KAAK,CAAE,GAAI,CAAC,CAAC,EAAK,CAAC,CACvG,CACA,QAAS,CAAAD,GAAGA,CAAAE,IAAA,CAAW,IAAV,CAACD,KAAK,CAAC,CAAC,CAAC,CAAAC,IAAA,CACpB,mBAAQ9E,IAAA,SAAM+D,SAAS,CAAC,6DAA6D,CAACgB,KAAK,CAAE,CAACC,cAAc,IAAArC,MAAA,CAAKkC,KAAK,MAAI,CAAE,CAAO,CAAC,CACtI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}